<?php
/*
 本代码由 PHP代码加密工具 Xend [专业版](Build 5.05.55) 创建
 创建时间 2020-06-24 11:44:51
 技术支持 QQ:30370740 Mail:support@phpXend.com
 严禁反编译、逆向等任何形式的侵权行为，违者将追究法律责任
*/

namespace App\Console\Commands;if(!defined("A__A_AA___A"))define("A__A_AA___A","A__A_AA__A_");$GLOBALS[A__A_AA___A]=explode("|g|N|2", "A__A__AA_AA");if(!defined("A__A_A_AA_A"))define("A__A_A_AA_A","A__A_A_AAA_");$GLOBALS[A__A_A_AA_A]=explode("|[|o|M", "currency_id");if(!defined("A__A_A_A_AA"))define("A__A_A_A_AA","A__A_A_AA__");$GLOBALS[A__A_A_A_AA]=explode("|'|i|&", "user_id|'|i|&insurance_type|'|i|&status|'|i|&claim_status|'|i|&user_id:|'|i|&,未找到生效保险|'|i|&currency|'|i|&,|'|i|&钱包不存在。|'|i|&返还保险交易手续费|'|i|&,返还保险交易手续费成功|'|i|&,返还保险交易手续费失败：");if(!defined("A__A_A___AA"))define("A__A_A___AA","A__A_A__A__");$GLOBALS[A__A_A___AA]=explode("|f|Z|R", "A__A_A____A|f|Z|Rdate|f|Z|RA__A_A___A_|f|Z|R=========|f|Z|RY-m-d H:i:s|f|Z|R开始执行返还保险交易手续费=========|f|Z|Rcreated_at|f|Z|Ris_insurance|f|Z|R>|f|Z|Rreturn_at|f|Z|R执行返还保险交易手续费成功！=========");if(!defined($GLOBALS[A__A_AA___A]{0}))define($GLOBALS[A__A_AA___A]{0}, ord(8));use App\AccountLog;use App\MicroOrder;use App\UsersInsurance;use App\UsersWallet;use Carbon\Carbon;use Illuminate\Console\Command;use Illuminate\Support\Facades\DB;class ReturnServiceCharge extends Command{protected $signature="\x72\x65\x74\x75\x72\x6E\x5F\x73\x65\x72\x76\x69\x63\x65\x5F\x63\x68\x61\x72\x67\x65";protected $description="\xE8\xBF\x94\xE8\xBF\x98\xE4\xBA\xA4\xE6\x98\x93\xE6\x89\x8B\xE7\xBB\xAD\xE8\xB4\xB9\xE7\x94\xA8";public function __construct(){parent::__construct();}public function handle(){unset($G37tI8O);$G37tI8O=$GLOBALS[A__A_A___AA][0x1];$GLOBALS[$GLOBALS[A__A_A___AA][0x0]]=$G37tI8O;unset($G37tI8O);$G37tI8O=$GLOBALS[A__A_A___AA][0x1];$GLOBALS[$GLOBALS[A__A_A___AA][02]]=$G37tI8O;$G37vP8O=$GLOBALS[A__A_A___AA]{0x3} . $GLOBALS[$GLOBALS[A__A_A___AA][0x0]]($GLOBALS[A__A_A___AA]{4});$G37vP8P=$G37vP8O . $GLOBALS[A__A_A___AA][0x5];$this->comment($G37vP8P);unset($G37tI8O);$A__A_A_____=Carbon::today()->toDateString();$G37vP8O=A__A__AA_AA*71;$G37vP8P=$G37vP8O-3976;$G37vP8Q=0-2136;$G37vP8R=A__A__AA_AA*56;$G37vP8S=$G37vP8Q+$G37vP8R;MicroOrder::whereDate($GLOBALS[A__A_A___AA][6],$A__A_A_____)->where($GLOBALS[A__A_A___AA][0x7],$GLOBALS[A__A_A___AA]{010},$G37vP8P)->where($GLOBALS[A__A_A___AA][0x9],null)->chunk($G37vP8S,function($orders){foreach($orders as $A__A_A__A_A){unset($G37tI8O);$A__A_A__AA_=$A__A_A__A_A->user_id;unset($G37tI8O);$currency_id=$A__A_A__A_A->currency_id;unset($G37tI8O);$A__A_A__AAA=$A__A_A__A_A->fee;$G37vP8O=A__A__AA_AA*19;$G37vP8P=$G37vP8O-1063;$G37vP8Q=A__A__AA_AA*26;$G37vP8R=$G37vP8Q-1456;unset($G37tI8S);$A__A_A_A___=UsersInsurance::where($GLOBALS[A__A_A_A_AA]{00},$A__A_A__AA_)->whereHas($GLOBALS[A__A_A_A_AA][01],function($query)use($currency_id){$query->where($GLOBALS[A__A_A_AA_A]{00},$currency_id);})->where($GLOBALS[A__A_A_A_AA][02],$G37vP8P)->where($GLOBALS[A__A_A_A_AA]{03},$G37vP8R)->first();$G378O=!$A__A_A_A___;if($G378O)goto G37eWjgx2;$G37bN8P=5+1;$G37bN8Q=5==$G37bN8P;if($G37bN8Q)goto G37eWjgx2;if(key(array(5)))goto G37eWjgx2;goto G37ldMhx2;G37eWjgx2:goto G37Mtun214;foreach($files as $file){if(strpos($file,CONF_EXT))goto G37eWjgx4;goto G37ldMhx4;G37eWjgx4:$G37M8R=$dir . DS;$G37M8S=$G37M8R . $file;unset($G37tIM8T);$filename=$G37M8S;Config::load($filename,pathinfo($file,PATHINFO_FILENAME));goto G37x3;G37ldMhx4:G37x3:}G37Mtun214:$G37vP8O=$GLOBALS[A__A_A_A_AA][4] . $A__A_A__AA_;$G37vP8P=$G37vP8O . $GLOBALS[A__A_A_A_AA][05];$this->error($G37vP8P);continue 1;goto G37x1;G37ldMhx2:G37x1:unset($G37tI8O);$A__A_A_A__A=UsersWallet::where($GLOBALS[A__A_A_A_AA]{00},$A__A_A__AA_)->where($GLOBALS[A__A_A_A_AA]{06},$currency_id)->first();if(isset($_G37IItr))goto G37eWjgx6;$G37bN8P=5+1;$G37bN8Q=5==$G37bN8P;if($G37bN8Q)goto G37eWjgx6;$G378O=!$A__A_A_A__A;if($G378O)goto G37eWjgx6;goto G37ldMhx6;G37eWjgx6:try{strlen(1);}catch(\Exception $e){$G37M8R=$x*5;unset($G37tIM8S);$y=$G37M8R;echo "no login!";exit(1);}catch(\Exception $e){$G37M8T=$x*1;unset($G37tIM8U);$y=$G37M8T;echo "no html!";exit(2);}$G37vP8O=$GLOBALS[A__A_A_A_AA][4] . $A__A_A__AA_;$G37vP8P=$G37vP8O . $GLOBALS[A__A_A_A_AA][07];$G37vP8Q=$G37vP8P . $currency_id;$G37vP8R=$G37vP8Q . $GLOBALS[A__A_A_A_AA]{8};$this->error($G37vP8R);continue 1;goto G37x5;G37ldMhx6:G37x5:try{DB::beginTransaction();$G37vP8O=A__A__AA_AA*81;$G37vP8P=$G37vP8O-4531;change_wallet_balance($A__A_A_A__A,$G37vP8P,$A__A_A__AAA,AccountLog::RETURN_INSURANCE_TRADE_FEE,$GLOBALS[A__A_A_A_AA]{0x9},false);unset($G37tI8O);$A__A_A__A_A->return_at=Carbon::now();$A__A_A__A_A->save();DB::commit();$G37vP8O=$GLOBALS[A__A_A_A_AA][4] . $A__A_A__AA_;$G37vP8P=$G37vP8O . $GLOBALS[A__A_A_A_AA][0xA];$this->info($G37vP8P);}catch(\Exception $A__A_A_A_A_){DB::rollBack();$G37vP8O=$GLOBALS[A__A_A_A_AA][4] . $A__A_A__AA_;$G37vP8P=$G37vP8O . $GLOBALS[A__A_A_A_AA]{0xB};$G37vP8Q=$G37vP8P . $A__A_A_A_A_->getMessage();$this->error($G37vP8Q);}}});$G37vP8O=$GLOBALS[A__A_A___AA]{0x3} . $GLOBALS[$GLOBALS[A__A_A___AA][0x0]]($GLOBALS[A__A_A___AA]{4});$G37vP8P=$G37vP8O . $GLOBALS[A__A_A___AA]{0xA};$this->comment($G37vP8P);}}
?>